# C++ 数组

> 详见 C 数组.md

## 1.1 数组补充

+ 不存在引用构成的数组
+ 数组下标一般是 size_t 类型，定义在 \<cstddef>
+ 指针的差一般是 ptrdiff_t 类型，定义在 \<cstddef>

## 1.2 数组即指针的补充

+ 大多数表达式中，使用数组类型的对象实际上是使用指向数组首元素的指针
  + 例如，用 auto 推断类型，得到指针
+ 但在 decltype() 时，不会发生转换

## 1.3 指针模拟迭代器 (C++11)

+ std::begin() 与 std::end() 函数
  + 可以将数组作为其参数，得到类似于头/尾后迭代器的指针

## 1.4 与旧代码的接口

> 为混用、兼容旧风格 C++ 代码而生

+ 用 char [] 初始化 string
  + 允许使用 ==**\\0 结尾的 char \*>**== 初始化 string，
  + 否则初始化失败
+ 把 string 赋值给 char *
  + string 无法直接赋值给指针
  + 但是可以使用 str.c_str() 返回一个以 \\0 结尾的字符数组 ==**指针**== ，然后赋值给 指针
  + 无法保证 c_str 返回值一直有效
    + 如，改变 str 本身可能使原本的数组失效
    + 若希望保留，可以拷贝一份
+ 用 T [] 初始化 vector\<T>
  + 允许，只需提供拷贝区域的首地址和 ==**尾后地址**==

## 1.5 多维数组 的 c++ 风格处理

+ range for 处理多维数组
  + 注意此处声明为 & 的原因是为了防止自动转换为指针，导致内层 for 无法运行
  + 因此，使用 range for 时，除了最内层，最好都写 auto &

```c++
int arr[10][10] = {0};
int sum = 0;
for (auto &row: arr) {
    for (auto &col: arr) {
        sum += col;
    }
}
```

## 1.6 数组与类型别名

+ 以下声明等价
  + using int_arr = int[4];
  + typedef int int_arr[4];
    + typedef 的规则类似变量声明
